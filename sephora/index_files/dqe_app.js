!function(e){function h(d){var h={},p={};d=d.replace("/?","?");var a=/.+?\:\/\/.+?(\/.+?)(?:#|\?|$)/.exec(d)[1];h.serviceId=a.substr(a.lastIndexOf("/")+1);delete (p=Util.getQueryStringParams(Util.getQueryString(d))).Licence;d=Object.keys(p);return e.each(d,function(a,c){h["dqe"+c]=p[c]}),h}e.fn.dqe=function(d){function r(a,c,f){for(var b="",k=(a+="").length,d=c.length,m=a.indexOf(c);-1<m;)b+=a.substring(0,m)+f,m=(a=a.substring(m+d,k)).indexOf(c);return""!=a&&(b+=a),b}function p(b,c){if(!c||!b)return b;
var f=a.remove_accents(b).toLowerCase(),g=a.remove_accents(c).toLowerCase(),k="";c=c.length;for(var d=f.indexOf(g);-1<d;)k+=b.substr(0,d)+"{"+b.substr(d,c)+"}",b=b.substr(d+c),d=(f=f.substr(d+c)).indexOf(g);return""!=b&&(k+=b),k}var a=this;a.render_item=function(a,c){var b;b=this.term;if(-1<b.indexOf(" ")){var g=b.split(" "),k=g.length;b=c.label;for(var d=0;d<k;d++)b=p(b,g[d])}else b=p(c.label,this.term);return b=r(b=r(b=r(b=r(b=r(b,"{","\x3cstrong\x3e"),"}","\x3c/strong\x3e"),"|",'\x3cbr/\x3e\x3cspan style\x3d"color:#070"\x3e')+
"\x3c/span\x3e","[",'\x3cspan class\x3d"ko"\x3e'),"]","\x3c/span\x3e"),e("\x3cli\x3e\x3c/li\x3e").data("item.autocomplete",c).append("\x3cdiv\x3e"+b+"\x3c/div\x3e").appendTo(a)};a.zip_pattern={FRA:/^\d{5}$/,DEU:/^\d{5}$/,AUT:/^\d{4}$/,BEL:/^\d{4}$/,CAN:/^[A-Z\d]{3} ?[A-Z\d]{3}$/,KOR:/^\d{3}[ -]?\d{3}$/,ESP:/^\d{5}$/,USA:/^([A-Z]{2})?[ -]?\d{5}[ -]?(\d{4})?$/i,ISR:/^\d{5}$/,ITA:/^\d{5}$/,JPN:/^\d{3}[ -]\d{4}$/,"JPN-en":/^\d{3}[ -]\d{4}$/,LUX:/^L?-?\d{4}$/i,NLD:/^\d{4} ?([A-Z]{2})?$/,POL:/^\d\d-?\d{3}$/,
PRT:/^\d{4}-?\d{3}$/,CZE:/^\d{3} ?\d{2}$/,ROU:/^\d{6}$/,GBR:/^[A-Z][A-Z\d]{1,3} ?\d[A-Z]{2}$/i,SGP:/^\d{6}$/,SVN:/^\d{4}$/,SWE:/^(SE)?-?\d{3} ?\d{2}$/,CHE:/^\d{4}$/,TUR:/^\d{5}$/,CHN:/^\d{6}$/,"CHN-en":/^\d{6}$/,RUS:/^\d{6}$/,NOR:/^\d{4}$/,DNK:/^\d{4}$/,FIN:/^\d{5}$/,THA:/^\d{5}$/,MAR:/^\d{5}$/,HUN:/^\d{4}$/,HKG:/^.*$/,"HKG-en":/^.*$/,QAT:/^.*$/,NZL:/^\d{4}$/,HRV:/^(HR)?-?\d{5}$/};a.reversed_countries={AUT:1,BEL:1,CHE:1,CZE:1,DEU:1,ESP:1,HRV:1,ISR:1,ITA:1,NLD:1,POL:1,PRT:1,ROU:1,SWE:1,TUR:1,RUS:1,
SVN:1,DNK:1,FIN:1,HUN:1,NOR:1};a.has_number=function(b){if(!(b=a.trim(b)))return!1;var c=a.selected_country();b=a.reversed_countries[c]?b.charCodeAt(b.length-1):b.charCodeAt(0);return 48<=b&&57>=b};a.specific_charset=function(){return!!{CHN:1,RUS:1,THA:1,SGP:1,ISR:1,DNK:1,SVN:1,"CHN-en":1,HRV:1,HKG:1,"HKG-en":1,JPN:1,DEU:1}[a.selected_country()]};a.fast_country=function(){return!!{FRA:1,GBR:1,LUX:1,BEL:1,ESP:1,NLD:1,DEU:1,CH2:1,MAR:1,POL:1,ARE:1,SAU:1}[a.selected_country()]};a.udecode=function(a){return-1==
a.indexOf("\\\\u")?a:a=a.replace(/\\\\u([\d\w]{4})/gi,function(a,b){return String.fromCharCode(parseInt(b,16))})};d=e.extend({country:"FRA",trace:0,license:"",append_locality:0},d);return a.settings=d,a.server=d.server,a.license=d.license,a.city=!!d.city&&e(d.city),a.zip=!!d.zip&&e(d.zip),a.street=!!d.street&&e(d.street),a.number=!!d.number&&e(d.number),a.compl=!!d.compl&&e(d.compl),a.local=!!d.local&&e(d.local),a.prov=!!d.prov&&e(d.prov),a.zipcity=!!d.zipcity&&e(d.zipcity),a.company=!!d.company&&
e(d.company),a.single=!!d.single&&e(d.single),a.geoloc=!!d.geoloc&&d.geoloc,a.city_search=d.city_search?1:0,a.min_bound=d.min_bound?d.min_bound:-1,a.max_bound=d.max_bound?d.max_bound:-1,a.force_nums=d.force_nums?d.force_nums:{},a.countryField=3!==d.country.length&&e(d.country),a.country=d.country,a.lat=0,a.lon=0,a.nearest&&a.single&&navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(b){b=b.coords;a.lat=b.latitude?b.latitude:0;a.lon=b.longitude?b.longitude:0},function(){a.lat=
0;a.lon=0},{enableHighAccuracy:!0,timeout:1E4,maximumAge:0}),a.countryField&&a.countryField.off("change.dqeEvent").on("change.dqeEvent",function(){a.clearSection("zip");a.clearSection("zipcity");a.clearSection("single");a.activate_zipcity_autocomplete();a.activate_single_autocomplete();a.zip.off("change",a.show_cities);a.zip_pattern.hasOwnProperty(e(this).val())||a.zip.off("change.dqeEvent").on("change.dqeEvent",function(){a.zip.is(":visible")&&a.show_cities()})}),a.asmx=-1<a.server.toLowerCase().indexOf(".asmx"),
"jsonp"===a.server?a.ajax=function(b,c){e.ajax({url:b,dataType:"jsonp",jsonp:"callback",success:function(b){a.specific_charset()&&(b=a.udecode(b));b||(b="{}");c(JSON.parse(b))}})}:"cors"==a.server?a.ajax=function(b,c){e.ajax({url:b,method:"GET",dataType:"text",crossdomain:!0,success:function(b){a.specific_charset()&&(b=a.udecode(b));b||(b="{}");c(JSON.parse(b))}})}:a.ajax=function(b,c){e.ajax({url:a.server,data:h(b),method:"POST",dataType:"text",success:function(b){b&&a.specific_charset()&&(b=a.udecode(b));
b=b?JSON.parse(b):{};c(b)}})},a.asmx&&(e.ajaxSetup({type:"POST",contentType:"application/json; charset\x3dutf-8",data:"{}",processData:!1,dataFilter:function(a){return a="undefined"!=typeof JSON&&"function"==typeof JSON.parse?JSON.parse(a):eval("("+a+")"),a.hasOwnProperty("d")?a.d:a}}),e.ajaxPrefilter(function(a,c,f){a.data=JSON.stringify(c.data)})),a.override_reset=function(){a.zip_override=!0;a.city_override=!0;a.street_override=!0;a.selected_zip_value="";a.selected_city_value="";a.selected_street_value=
"";a.selected_zipcity_value=""},a.remove_accents=function(a){for(var b,f,g=a.length,k="",d=0;d<g;d++)f=a.charAt(d),k+=-1==(b="ÀÁÂÃÄÈÉÊËÌÍÎÏÒÓÔÕÖÙÚÛÜÇçàáâãèéêëîïòôõöùúûüñ".indexOf(f))?f:"AAAAAEEEEIIIIOOOOOUUUUCcaaaaeeeeiioooouuuun".charAt(b);return k},a.override_events=function(){a.override_reset();a.city&&a.city.on("input.dqeEvent",function(){var b=a.city.val();b&&a.selected_city_value&&b==a.selected_city_value?a.override(!1,"city"):a.override(!0,"city")});a.street&&a.street.on("input.dqeEvent",function(){var b=
a.street.val();b&&a.selected_street_value&&0<=b.indexOf(a.selected_street_value)?a.override(!1,"street"):a.override(!0,"street")});a.zipcity&&a.zipcity.on("input.dqeEvent",function(){var b=a.zipcity.val();a.selected_zipcity_value&&b!==a.selected_zipcity_value?(a.override(!0,"zip"),a.override(!0,"city")):b&&b==a.selected_zipcity_value&&(a.override(!1,"zip"),a.override(!1,"city"))})},a.execute_trigger=function(b,c){a.trigger(b,c);"zip"===b&&(a.override(!1,"zip"),a.zip&&(a.selected_zip_value=a.zip.val()),
a.zipcity&&(a.selected_zipcity_value=a.zipcity.val()));"city"===b&&(a.override(!1,"city"),a.city&&(a.selected_city_value=a.city.val()),a.zipcity&&(a.selected_zipcity_value=a.zipcity.val()));"street"===b&&(a.override(!1,"street"),a.selected_street_value=a.street.val())},a.override=function(b,c){return!0!==b&&!1!==b||(c&&"zip"!==c||(a.zip_override=b),c&&"city"!==c||(a.city_override=b),c&&"street"!==c||(a.street_override=b),a.execute_trigger("override")),{zip:a.zip_override,city:a.city_override,street:a.street_override}},
a.count=function(a){var b=0,f;for(f in a)a.hasOwnProperty(f)&&b++;return b},a.trimLeft=function(a,c){return a?void 0===c?a.replace(/^\s+/gm,""):a.replace(new RegExp("^["+c+"]+"),""):""},a.trimRight=function(a,c){return a?void 0===c?a.replace(/\s+$/gm,""):a.replace(new RegExp("["+c+"]+$"),""):""},a.trim=function(b,c){return b?void 0===c?b.replace(/^\s+|\s+$/gm,""):(b=a.trimLeft(b,c),a.trimRight(b,c)):""},a.replace=function(a,c,f){for(var b="",k=(a+="").length,d=c.length,m=a.indexOf(c);-1<m;)b+=a.substring(0,
m)+f,m=(a=a.substring(m+d,k)).indexOf(c);return""!=a&&(b+=a),b},Array.prototype.indexOf||(Array.prototype.indexOf=function(a,c){if(null==this)throw new TypeError('"this" vaut null ou n est pas défini');var b=Object(this),g=b.length>>>0;if(0===g)return-1;c=+c||0;if(Math.abs(c)===1/0&&(c=0),g<=c)return-1;for(c=Math.max(0<=c?c:g-Math.abs(c),0);c<g;){if(c in b&&b[c]===a)return c;c++}return-1}),a.filter_cities=function(b){for(var c,f,g,k,d,m,l,e,n,h,q=1,p=[],r=a.count(b),u=a.selected_country();b[q];){if(!(l=
b[q].IDLocalite)&&1===r)return[];if(c=a.trim(b[q].Localite),f=a.trim(b[q].LieuDit),(g=a.trim(b[q].Province))!==c&&a.trim(g,"*-")||(g=""),"FRA"!==u&&g)h=g.indexOf("-"),-1<h&&(g=g.substr(0,h),-1<(h=l.indexOf("-"))&&(l=l.substr(0,h)));(k=a.trim(b[q].CodePostal))&&c&&(d=k.length-c.length-1,k.substr(d)===" "+c&&(k=k.substr(0,d)));m=b[q].Entreprise?a.trim(b[q].Entreprise):"";h=g?c+", "+g:f?c+", "+f:c;l={city_id:l,city:c};-1<(e=b[q].Voie?b[q].Voie:"").indexOf("_BP_")&&!0;n=e?e.split(","):[];for(var v=0;v<
n.length;v++)n[v]=a.trim(n[v]);m&&(l.company=m);m=[];a.zip_pattern.hasOwnProperty(a.selected_country())||a.zip.val()==k||m.push(k);3==n.length?(n[0]&&n[1]?(l.company=n[0]+", "+n[1],m.push(l.company)):(n[0]&&(l.company=n[0],m.push(n[0])),n[1]&&(l.compl=n[1],m.push(n[1]))),n[2]&&(l.street=n[2],m.push(n[2]))):(l.company&&m.push(l.company),e&&(l.street=a.trim(e),l.number=a.trim(b[q].Numero),l.street_id=a.trim(b[q].IDVoie),m.push(l.street)));0<m.length&&(h+=" ("+m.join(", ")+")");l.label=a.no_bp(h);k&&
(l.zip=k);f&&(l.local=f);g&&(l.prov=g);b[q].ListeNumero&&(l.numbers=b[q].ListeNumero.split(";"));l.zipcity=-1===c.indexOf("(")?k+" "+c:c;p.push(l);q++}return p},a.filter_adr=function(b){for(var c,f,g,k,d,m,l,e,n,h,q,p=1,r=[],u="",v=a.num_is_after();b[p];){if(c=b[p],f=a.trim(c.Voie),g=a.trim(c.Numero),q="",c.ListeNumero&&-1===c.ListeNumero.split(";").indexOf(g)&&(g=""),k=a.trim(c.CodePostal),d=a.trim(c.Localite),m=a.trim(c.IDVoie),l=a.trim(c.IDLocalite),e=c.LieuDit?a.trim(b[p].LieuDit):"",-1<f.indexOf(","))n=
f.split(","),3===n.length&&(u=a.trim(n[0]),q=a.trim(n[1]),f=a.trim(n[2]));n=v?a.trim(f+" "+g):a.trim(g+" "+f);h=(u?", "+u:"")+(q?", "+q:"")+(e?", "+e:"");k={id:m,label:k?n+" ("+k+h+")":n+h,simple_label:n,street:f,number:g,zip:k,city:d,city_id:l,local:e};q&&(k.prov=q);u&&(k.company=u);r.push(k);p++}return r},a.filter_num=function(a){a=a&&a[1]&&a[1].ListeNumero?a[1].ListeNumero.split(";"):[];for(var b=[],f=a.length,g=0;g<f;g++)b.push({value:a[g],label:a[g]});return b},a.filter_single=function(b){if(!b||
"{}"===b)return[];for(var c,f,g,k,d,m=[],l=1,e=a.num_is_after();b[l]&&!(5<l);){if((c=b[l]).Numero=a.trim(c.Numero),-1<c.Voie.indexOf(",")?(g=(f=c.Voie.split(",")).length,c.Voie=a.trim(f[g-1])):c.Voie=a.trim(c.Voie),k=c.label?c.label:(k=a.recombine_street(c.Numero,c.TypeVoie,c.Voie,e),k+=" "+a.trim(c.CodePostal+" "+c.Localite),c.Entreprise?k+=" ("+c.Entreprise+")":c.LieuDit&&(k+=" ("+c.LieuDit+")"),a.trim(k)),d={street:c.Voie,num:c.Numero,numonly:c.NumSeul,type:c.TypeVoie,id:c.IDVoie,zip:c.CodePostal,
city:c.Localite,label:k,value:k,city_id:c.IDLocalite},c.complement&&(d.numcompl=c.complement),c.Entreprise&&(d.company=c.Entreprise),c.LieuDit&&(d.local=c.LieuDit),c.Complement&&(d.compl=c.Complement),c.Province&&"*"!==c.Province&&(d.prov=c.Province),c.SousLocalite&&(d.subcity=c.SousLocalite),c.ListeNumero){var n=c.ListeNumero.split(";"),h=!c.Numero,q=-1===n.indexOf(c.Numero);h&&(d.missing_number=1);q&&(d.wrong_number=1);(h||q)&&(d.nums=n)}else c.Numero&&(d.unexpected_number=1);c.Latitude&&(d.latitude=
c.Latitude);c.Longitude&&(d.longitude=c.Longitude);m.push(d);l++}return m},a.house_typo=function(a,c){var b,d="",k;for(k in a)if(a.hasOwnProperty(k)&&(b=a[k],"TYPO_"===k.substr(0,5)&&1==parseInt(b,10))){d=k.substr(5);break}if(!d)return"";if(c)return d;a={A1:["Grandes maisons récentes","Familles matures avec adolescents","CSP et niveau d'études supérieures","Propriétaires et au moins 2 voitures"],A2:["Propriétaires de grandes maisons en ville","Couples 40 ans et plus avec adolescents","Cadres, prof. interm. ou retraités",
"Niveau d'études supérieures"],A3:["Couples matures sans enfant ou retraités","Maisons en périphérie des villes","Bons revenus","Grands utilisateurs de la voiture"],A4:["Ouvriers qualifiés ou prof. interm.","Couples 40-54 ans avec enfants","Grandes maisons avec garage","Installés depuis plus de 10 ans"],B1:["Jeunes actifs ou retraités en ville","Personnes seules 18-39 ans ou 65+","CSP et niveau d'études moyen","Installés depuis moins de 5 ans"],B2:["Jeunes célibataires en centre-ville","Petits appartements très anciens",
"Commerces et équipements importants","Récemment installés"],B3:["Retraités ou employés","Appartements anciens de taille moyenne","Faible niveau d'études, revenus moyens","Ménages installés depuis plus de 10 ans"],B4:["Ouvriers peu qualifiés ou prof. interm.","Familles monoparentales","Locataires d'appartements HLM","Pop étrangère aux revenus modestes"],C1:["Population entre 18 et 39 ans","Très petits appartements dans Paris","Cadres ou étudiants en hautes études","Gros utilisateurs des transports en commun"],
C2:["Jeunes cadres, prof. interm. ou employés","Anciens appartements de taille moyenne","Gde couronne parisienne ou gdes agglos"],D1:["Jeunes ménages cultivés, bonne situation","Log. récents en périphérie des villes","Professions interm., cadres et employés","Familles avec enfants"],D2:["Ménages avec enfants (\x26lt; 10 ans)","Log. individuels nouvellement construits","Niveau d'études et revenus moyens","Installation récente"],D3:["Familles ouvrières avec enfants","Métiers techniques","Grandes maisons très anciennes",
"Revenus modestes"],E1:["Etudiants 18-24 ans, célibataire","Locataires de petits appartements","Adeptes de transports en commun"],F1:["Familles avec enfants ou adolescents","Actifs avec revenus dans la moyenne","Grande couronne parisienne","Habitat collectif type HLM"],F2:["Ménages sans famille ou monoparentaux","Employés et ouvriers","Population étrangère et immigrés","Habitat collectif HLM de petite taille"],F3:["Familles nombreuses, 25-39 ans","HLM en gde agglomération","Grande proportion d'immigrés",
"Revenus très faibles"],G1:["Couples sans enfant","Ménages ouvriers en zone isolée","Faibles revenus","Log. individuels de superficie moyenne"],G2:["Retraités de plus de 65 ans","Habitat hétérogène de taille moyenne","Faibles revenus","Nbr. infrastructures, notamment"],H1:["Retraités au soleil et vacanciers","Activité touristique importante","Habitat hétérogène, princ. rés. secondaire","Population âgée sans enfant à charge"],H2:["Ouvriers / retraités aux revenus modestes","Logements individuels, d'avant 1949",
"Zone rurale","Nbr. équipements : alim; santé, enseign."],H3:["Ouvriers, agriculteurs ou retraités","Propriétaires de grandes maisons anciennes","Revenus modestes","Au moins 2 voitures"],H4:["Ouvriers de plus de 40 ans ou retraités","Propriétaires de maisons individuelles anciennes","Faible niveau d'études"],H5:["Familles d'artisans ou commerçants","Ménages de 40-54 ans avec adolescents","Maisons, parfois en rés. secondaires","Installés depuis plus de 10 ans"],H6:["Forte part d'agriculteurs et de retraités",
"Revenus dans la moyenne","Propriétaire de maison à la campagne"]};return a[d]?a[d]:""},a.fill_zip=function(b){"PRT"==a.selected_country()&&b.match(/^\d{7}$/)&&(b=b.substr(0,4)+"-"+b.substr(4));a.zip&&a.zip.val(b);a.execute_trigger("zip",[b])},a.convert_iso2=function(a){var b={AF:"AFG",AX:"ALA",AL:"ALB",DZ:"DZA",AS:"ASM",AD:"AND",AO:"AGO",AI:"AIA",AQ:"ATA",AG:"ATG",AR:"ARG",AM:"ARM",AW:"ABW",AU:"AUS",AT:"AUT",AZ:"AZE",BS:"BHS",BH:"BHR",BD:"BGD",BB:"BRB",BY:"BLR",BE:"BEL",BZ:"BLZ",BJ:"BEN",BM:"BMU",
BT:"BTN",BO:"BOL",BA:"BIH",BW:"BWA",BV:"BVT",BR:"BRA",VG:"VGB",IO:"IOT",BN:"BRN",BG:"BGR",BF:"BFA",BI:"BDI",KH:"KHM",CM:"CMR",CA:"CAN",CV:"CPV",KY:"CYM",CF:"CAF",TD:"TCD",CL:"CHL",CN:"CHN",HK:"HKG",MO:"MAC",CX:"CXR",CC:"CCK",CO:"COL",KM:"COM",CG:"COG",CD:"COD",CK:"COK",CR:"CRI",CI:"CIV",HR:"HRV",CU:"CUB",CY:"CYP",CZ:"CZE",DK:"DNK",DJ:"DJI",DM:"DMA",DO:"DOM",EC:"ECU",EG:"EGY",SV:"SLV",GQ:"GNQ",ER:"ERI",EE:"EST",ET:"ETH",FK:"FLK",FO:"FRO",FJ:"FJI",FI:"FIN",FR:"FRA",GF:"GUF",PF:"PYF",TF:"ATF",GA:"GAB",
GM:"GMB",GE:"GEO",DE:"DEU",GH:"GHA",GI:"GIB",GR:"GRC",GL:"GRL",GD:"GRD",GP:"GLP",GU:"GUM",GT:"GTM",GG:"GGY",GN:"GIN",GW:"GNB",GY:"GUY",HT:"HTI",HM:"HMD",VA:"VAT",HN:"HND",HU:"HUN",IS:"ISL",IN:"IND",ID:"IDN",IR:"IRN",IQ:"IRQ",IE:"IRL",IM:"IMN",IL:"ISR",IT:"ITA",JM:"JAM",JP:"JPN",JE:"JEY",JO:"JOR",KZ:"KAZ",KE:"KEN",KI:"KIR",KP:"PRK",KR:"KOR",KW:"KWT",KG:"KGZ",LA:"LAO",LV:"LVA",LB:"LBN",LS:"LSO",LR:"LBR",LY:"LBY",LI:"LIE",LT:"LTU",LU:"LUX",MK:"MKD",MG:"MDG",MW:"MWI",MY:"MYS",MV:"MDV",ML:"MLI",MT:"MLT",
MH:"MHL",MQ:"MTQ",MR:"MRT",MU:"MUS",YT:"MYT",MX:"MEX",FM:"FSM",MD:"MDA",MC:"MCO",MN:"MNG",ME:"MNE",MS:"MSR",MA:"MAR",MZ:"MOZ",MM:"MMR",NA:"NAM",NR:"NRU",NP:"NPL",NL:"NLD",AN:"ANT",NC:"NCL",NZ:"NZL",NI:"NIC",NE:"NER",NG:"NGA",NU:"NIU",NF:"NFK",MP:"MNP",NO:"NOR",OM:"OMN",PK:"PAK",PW:"PLW",PS:"PSE",PA:"PAN",PG:"PNG",PY:"PRY",PE:"PER",PH:"PHL",PN:"PCN",PL:"POL",PT:"PRT",PR:"PRI",QA:"QAT",RE:"REU",RO:"ROU",RU:"RUS",RW:"RWA",BL:"BLM",SH:"SHN",KN:"KNA",LC:"LCA",MF:"MAF",PM:"SPM",VC:"VCT",WS:"WSM",SM:"SMR",
ST:"STP",SA:"SAU",SN:"SEN",RS:"SRB",SC:"SYC",SL:"SLE",SG:"SGP",SK:"SVK",SI:"SVN",SB:"SLB",SO:"SOM",ZA:"ZAF",GS:"SGS",SS:"SSD",ES:"ESP",LK:"LKA",SD:"SDN",SR:"SUR",SJ:"SJM",SZ:"SWZ",SE:"SWE",CH:"CHE",SY:"SYR",TW:"TWN",TJ:"TJK",TZ:"TZA",TH:"THA",TL:"TLS",TG:"TGO",TK:"TKL",TO:"TON",TT:"TTO",TN:"TUN",TR:"TUR",TM:"TKM",TC:"TCA",TV:"TUV",UG:"UGA",UA:"UKR",AE:"ARE",GB:"GBR",US:"USA",UM:"UMI",UY:"URY",UZ:"UZB",VU:"VUT",VE:"VEN",VN:"VNM",VI:"VIR",WF:"WLF",EH:"ESH",YE:"YEM",ZM:"ZMB",ZW:"ZWE"};return b[a]?b[a]:
"FRA"},a.selected_country=function(){var b=a.countryField?a.countryField.val():a.country;return b&&2==b.length?a.convert_iso2(b.toUpperCase()):b},a.clear=function(){a.clearSection("zip");a.zip&&a.zip.off("input.dqeEvent change.dqeEvent");a.countryField.length&&a.countryField.off("change.dqeEvent");a.zipcity&&a.removeAutocomplete(a.zipcity);a.single&&a.removeAutocomplete(a.single)},a.idcheck=function(b,c,f,d,k,t){b={fn:"SEARCH",Address:a.remove_accents(b),PostalCode:c,City:a.remove_accents(f),LastName:a.remove_accents(d),
FirstName:a.remove_accents(k),Version:2};b=a.url(b);a.ajax(b,function(a){window[t](a)})},a.lifestyle=function(b,c,f,d){var k={status:0};b=a.url({server:"es",fn:"GETINFOLIFESTYLE",Address:b,PostalCode:c});a.ajax(b,function(b){var c={status:1};if(b&&b.DATA1){for(var f in b=b.DATA1,c.code=a.house_typo(b,1),c.typo=a.house_typo(b),b)b.hasOwnProperty(f)&&"TYPO_"!=f.substr(0,5)&&(c[f.toLowerCase()]=b[f]);window[d](c)}else window[d](k)})},a.latlng=function(b){var c=a.current_number?a.current_number:"",f=
a.current_street_id,d={status:0,msg:"Coordonnées non trouvées"};if(f)c=a.url({fn:"LATLG",IDVoie:f,Num:c,Pays:a.selected_country()}),a.ajax(c,function(a){a&&a[1]?0==(a=a[1]).Latitude&&0==a.Longitude?window[b](d):(a.status=1,window[b](a)):window[b](d)});else window[b](d)},a.valid_zip=function(b){var c=a.selected_country();return!a.zip_pattern[c]||b.match(a.zip_pattern[c])},a.num_is_after=function(){var b=a.selected_country();return!!a.reversed_countries[b]},a.recombine_street=function(b,c,f,d){var k=
[];return d||(d=a.num_is_after()),d?(c&&k.push(c),f&&k.push(f),b&&k.push(b)):(b&&k.push(b),c&&k.push(c),f&&k.push(f)),k.join(" ")},a.num_final_check=function(){var b=a.selected_country();("BEL"===b||"PRT"===b)&&a.current_street_id&&a.current_city_id&&a.current_zip&&(b=a.url({fn:"NUM",Numero:a.current_number,IDVoie:a.current_street_id,IDLocalite:a.current_city_id,CodePostal:a.current_zip,Pays:b}),a.ajax(b,function(b){if(b&&b[1]&&b[1].IDLocalite){var c=b[1].CodePostal,d=b[1].IDLocalite;b=b[1].Localite;
a.zip&&a.current_zip!==c&&a.fill_zip(c);a.current_city_id!==d&&(a.current_city_id=d,a.city&&a.city.val(b));!a.zipcity||a.current_zip===c&&a.current_city_id===d||(a.zipcity.val(c+" "+b),a.selected_zipcity_value=a.zipcity.val())}}))},a.show_numbers=function(){a.force_num_in_street=!1;var b=a.current_street_id,c=a.current_city_id,f=a.current_zip;if(a.number){a.number.focus();var d=a.fast_country();a.removeAutocomplete(a.number);a.number.autocomplete({delay:d?0:300,source:function(d,g){a.single&&a.current_numbers_source?
g(a.current_numbers_source):(d=a.url({fn:"NUM",IDVoie:b,IDLocalite:c,CodePostal:f,Pays:a.selected_country()}),a.ajax(d,function(b){g(a.filter_num(b))}))},minLength:0,select:function(b,c){return a.clearSection("compl"),a.current_number=c.item.value,a.number.val(c.item.value),a.show_complements(),a.execute_trigger("number",[c.item.value]),a.num_final_check(),!1},response:function(a,b){b.content.length}}).focus(function(){e(this).data("ui-autocomplete")&&e(this).autocomplete("search",e(this).val())});
a.number.focus()}},a.load_addresses_with_numbers=function(){a.force_num_in_street=!1;var b=a.current_city_id,c=a.current_zip,d=a.current_street_id,g=a.street.val(),k=a.num_is_after(),e=-1<g.indexOf("%d");a.num_search=!0;b=a.url({fn:"NUM",IDVoie:d,IDLocalite:b,CodePostal:c,Pays:a.selected_country()});a.ajax(b,function(b){for(var c,f,n=(b=a.filter_num(b)).length,m=[],t=0;t<n;t++)c=b[t].value,f=e?a.string_replace(g,"%d",c):k?g+" "+c:c+" "+g,c={id:d,number:c,label:f,simple_label:f},b[t].street_id&&(c.street_id=
b[t].street_id),b[t].street&&(c.street=b[t].street),m.push(c);a.street.data("ui-autocomplete")&&0<m.length&&(a.street.autocomplete("option","source",m),a.street.autocomplete("option","minLength",0),a.street.autocomplete("search",a.street.val()))})},a.load_addresses_with_bp=function(b,c){a.force_num_in_street=!0;var d=a.current_street_id;b=(b=b.replace("_BP_:","")).replace("_BP_","");for(var g,k,e=c.length,m=[],l=0;l<e;l++)g=c[l],k=b.replace("BP_",g),m.push({value:d,number:g,label:k,simple_label:k});
a.street.data("ui-autocomplete")||a.show_streets();a.street.autocomplete("option","source",m);a.street.autocomplete("option","minLength",0);a.street.autocomplete("search",a.street.val())},a.set_number=function(b){a.execute_trigger("number",[b.number]);a.current_number=b.number;a.num_final_check();a.number&&a.number.val(b.number);a.show_complements()},a.show_streets=function(b){a.clearSection("number");var c=a.direct_numbers||a.single,d=a.fast_country();a.street&&(c||(a.current_street_id=""),b||c||
a.street.val(""),a.street.focus(),a.removeAutocomplete(a.street),a.street.autocomplete({delay:d?0:300,source:function(b,d){if(c)d(a.current_numbers_source);else{var f=a.selected_country();a.num_search=!1;b={fn:"ADR",IDLocalite:a.current_city_id,Adresse:b.term,Instance:0,Pays:f};"FRA"===f&&(b.Etendue="O");f=a.url(b);a.ajax(f,function(b){d(a.filter_adr(b))})}},minLength:2,select:function(b,c){if(a.adr_autocomplete_used=!0,a.clearSection("number"),a.num_search||(a.current_street_id=c.item.id),a.street.autocomplete("option",
"minLength",2),c.item.zip&&c.item.city)a.zipcity&&(b=c.item.zip+" "+c.item.city,!a.local&&c.item.local&&(b+=", "+c.item.local),a.zipcity.val(b),a.selected_zipcity_value=a.zipcity.val()),a.zip&&(b=a.zip.val(),a.execute_trigger("zip",c.item.zip),c.item.zip&&b!=c.item.zip&&-1===a.city.val().indexOf("CEDEX")&&a.fill_zip(c.item.zip)),a.city&&c.item.city_id&&c.item.city_id!=a.current_city_id&&(a.city.val(c.item.city),a.execute_trigger("city",c.item.city)),a.current_zip=c.item.zip,a.current_city_id=c.item.city_id;
if(c.item.company&&a.company&&(a.company.val(c.item.company),a.execute_trigger("company",[c.item.company])),a.local&&c.item.hasOwnProperty("local")&&(a.local.val(c.item.local),a.execute_trigger("local",[c.item.local])),c.item.prov&&a.prov&&(a.prov.val(c.item.prov),a.execute_trigger("prov",[c.item.prov])),c.item.street||(c.item.street=""),a.number&&!a.force_num_in_street)a.street.val(c.item.street),a.execute_trigger("street",[c.item.street]),c.item.number?a.set_number(c.item):a.show_numbers();else{if(a.street.val(c.item.simple_label),
a.execute_trigger("street",[c.item.street]),!c.item.number)return a.load_addresses_with_numbers(),!1;a.set_number(c.item)}return a.num_search&&a.show_complements(),!1}}).off("focus").on("focus.dqeEvent",function(){e(this).data("ui-autocomplete")&&e(this).autocomplete("search",e(this).val())}).on("keypress.dqeEvent",function(){a.clearSection("number");"FRA"==a.selected_country()&&a.clearSection("compl");a.adr_autocomplete_used&&(a.adr_autocomplete_used=!1,a.removeAutocomplete(a.street),a.street.off("focus").off("keypress"),
a.current_street_id="",a.single?(a.removeAutocomplete(a.single),a.current_numbers_source=!1,a.activate_single_autocomplete()):a.show_streets(!0))}))},a.removeAutocomplete=function(a){a.data("ui-autocomplete")&&(a.autocomplete("destroy"),a.removeData("ui-autocomplete"))},a.clearSection=function(b){"zip"==b&&a.zip&&(a.override_reset(),a.zip.val(""),a.clearSection("city"),a.current_zip="");"city"==b&&a.city&&(a.override_reset(),a.city.val(""),a.removeAutocomplete(a.city),a.clearSection("local"),a.clearSection("street"),
a.clearSection("prov"),a.clearSection("compl"),a.current_city_id="");"local"==b&&a.local&&(a.local.val(""),a.removeAutocomplete(a.local),a.clearSection("street"),a.clearSection("compl"),a.current_local_id="");"street"==b&&a.street&&(a.street.val(""),a.removeAutocomplete(a.street),a.clearSection("number"),a.current_street_id="",a.execute_trigger("override"),a.direct_numbers=!1);"number"==b&&a.number&&(a.number.val(""),a.removeAutocomplete(a.number),a.current_number="",a.current_numbers_source=[]);
"compl"==b&&a.compl&&(a.compl.val(""),a.removeAutocomplete(a.compl),a.current_compl="",a.current_compl_source=[]);"prov"==b&&a.prov&&(a.prov.val(""),a.current_prov="");"zipcity"==b&&a.zipcity&&(a.override_reset(),a.zipcity.val(""),a.removeAutocomplete(a.zipcity),a.clearSection("street"),a.current_zipcity="");"single"==b&&a.single&&(a.single.val(""),a.removeAutocomplete(a.single))},a.no_bp=function(b){return b=a.replace(b,"_BP_:",""),b=a.replace(b,"_BP_",""),b=a.replace(b," BP_",""),b=a.replace(b,
"BP_",""),a.trim(b)},a.set_city=function(b){a.clearSection("street");a.settings.append_locality&&b.local&&(b.city+=", "+b.local);a.city&&a.city.val(b.city);a.compl&&b.compl?(a.compl.val(b.compl),a.execute_trigger("compl",[b.compl])):a.clearSection("compl");a.local&&b.local&&(a.local.val(b.local),a.execute_trigger("local",[b.local]));a.prov&&b.prov&&(a.prov.val(b.prov),a.current_prov=b.prov,a.execute_trigger("prov",[b.prov]));a.current_city_id=b.city_id;a.execute_trigger("city",[b.city_id,b.city]);
a.show_streets();b.zip&&(a.zip&&a.zip.val()!==b.zip&&a.zip.val(b.zip),a.current_zip=b.zip,a.execute_trigger("zip",b.zip));b.street&&a.street&&(-1<b.street.indexOf("BP_")?b.numbers?a.load_addresses_with_bp(b.street,b.numbers):(a.street.val(a.no_bp(b.street)),a.execute_trigger("street",b.street)):(a.street.val(b.street),a.execute_trigger("street",b.street)));b.street_id&&(a.current_street_id=b.street_id,a.street.autocomplete("search",a.street.val()));b.company&&a.company&&(a.company.val(b.company),
a.execute_trigger("company",[b.company]));b.street&&a.street&&b.numbers&&a.show_numbers_directly(b.numbers,b.street,"",b.street_id)},a.extract_city_name=function(b){var c=b.lastIndexOf("(");return-1===c?b:a.trim(b.substr(0,c))},a.calculate_zip=function(b,c){var d=a.url({fn:"CP",CodePostal:"",IDLocalite:b,Instance:0,Pays:a.selected_country()});a.ajax(d,function(d){for(var f=a.count(d),g=1;d[g];){if(1===f||d[g].Localite===c){a.fill_zip(d[g].CodePostal);a.set_city({city:d[g].Localite,value:b,zip:d[g].CodePostal});
break}g++}})},a.search_cities=function(){var b=a.fast_country();a.city_search_enabled=1;a.removeAutocomplete(a.city);a.city.autocomplete({delay:b?0:300,source:function(b,d){b=a.url({fn:"CP",CodePostal:b.term,Alpha:"false",Instance:0,Pays:a.selected_country()});a.ajax(b,function(b){b=a.filter_cities(b,!0);for(var c=[],f=0;f<b.length;f++)-1===b[f].city.indexOf(" CEDEX")&&c.push(b[f]);d(c)})},minLength:3,select:function(b,d){b=a.extract_city_name(d.item.city);return a.calculate_zip(d.item.city_id,b),
!1},focus:function(a,b){a.preventDefault()}})},a.show_cities=function(b){a.clearSection("city");a.override(!0,"zip");var c=a.zip.val();a.valid_zip(c)&&(a.local&&a.local.val(""),b=a.url({fn:"CP",CodePostal:c,Alpha:"false",Instance:0,Pays:a.selected_country()}),a.ajax(b,function(b){var d=1==(b=a.filter_cities(b)).length&&!a.city.val();b&&0<b.length&&(a.zip.val(c),a.execute_trigger("zip",[c]),a.city.autocomplete({source:b,minLength:0,appendTo:e(a.city).parent(),select:function(b,c){return a.set_city(c.item),
!1}}).off("focus.dqeEvent").on("focus.dqeEvent",function(){!d&&e(this).data("ui-autocomplete")&&e(this).autocomplete("search",e(this).val())}),d&&a.set_city(b[0]))}))},a.activate_zipcity_autocomplete=function(){var b=a.selected_country(),c=a.fast_country();a.zipcity&&!a.single&&(a.removeAutocomplete(a.zipcity),a.zipcity.autocomplete({delay:c?0:300,source:function(c,d){c=a.url({fn:"CP",CodePostal:c.term,Alpha:"false",Instance:0,Pays:b});a.ajax(c,function(b){b=a.filter_cities(b);d(b)})},minLength:3,
select:function(b,c){return a.zipcity.val(c.item.zipcity),a.selected_zipcity_value=a.zipcity.val(),a.local&&c.item.local&&(a.local.val(c.item.local),a.execute_trigger("local",[c.item.local])),a.prov&&c.item.prov&&(a.prov.val(c.item.prov),a.execute_trigger("prov",[c.item.prov])),a.current_city_id=c.item.city_id,a.current_zip=c.item.zip,a.current_city=c.item.city,a.show_streets(),a.execute_trigger("zip",[c.item.value,c.item.zip]),a.execute_trigger("city",[c.item.value,c.item.city]),c.item.company&&
a.company&&(a.company.val(c.item.company),a.execute_trigger("company",[c.item.company])),c.item.street&&a.street&&(-1<c.item.street.indexOf("BP_")?a.load_addresses_with_bp(c.item.street,c.item.numbers):(a.street.val(c.item.street),a.execute_trigger("street",city.street))),c.item.street_id&&(a.current_street_id=c.item.street_id,a.street.autocomplete("search",a.street.val())),!1},focus:function(a,b){a.preventDefault()}}).on("focusin.dqe",function(){var b=a.zipcity.val();e(this).data("ui-autocomplete")&&
2<b.length&&e(this).autocomplete("search",b)}),a.zipcity.click())},a.reset_single_autocomplete=function(){a.zip&&a.zip.val("");a.city&&a.city.val("");a.compl&&a.compl.val("");a.prov&&a.prov.val("");a.local&&a.local.val("");a.company&&a.company.val("");a.street.off("input",a.reset_single_autocomplete);a.single.off("click",a.reset_single_autocomplete);a.removeAutocomplete(a.single);a.activate_single_autocomplete()},a.geolocErrorCallback=function(a){switch(a.code){case 1:"Permission denied";break;case 2:"Position unavailable";
break;case 3:"Timeout"}},a.setGeolocCity=function(b){a.lat=b.coords.latitude;a.lon=b.coords.longitude;b={fn:"SINGLE",Adresse:"",Pays:a.selected_country(),Lon:a.lon,Lat:a.lat};b=a.url(b);a.ajax(b,function(b){if(b[1]){b=b[1];a.zipcity&&(a.selected_zipcity_value=b.CodePostal+" "+b.Localite,a.zipcity.val(b.CodePostal+" "+b.Localite).trigger("input"));var c=a.num_is_after(),c=a.recombine_street(b.Numero,"",b.Voie,c);a.zip&&a.zip.val(b.CodePostal);a.city&&a.city.val(b.Localite);a.street&&c&&a.street.val(c);
a.current_city_id=b.IDLocalite;a.current_street_id=b.IDVoie;a.current_zip=b.CodePostal}})},a.getGeolocCity=function(){0<a.lat||0<a.lon?a.setGeolocCity({coords:{latitude:a.lat,longitude:a.lon}}):navigator.geolocation&&navigator.geolocation.getCurrentPosition(a.setGeolocCity,a.geolocErrorCallback,{enableHighAccuracy:!0,timeout:1E4,maximumAge:0})},a.show_numbers_directly=function(b,c,d,g){a.direct_numbers=!0;var f=-1<c.indexOf("%d");if(a.number)a.current_numbers_source=b,a.show_numbers();else{for(var e,
m=a.num_is_after(),l=[],h=b.length,n=0;n<h;n++)e=f?c.replace("%d",b[n]):a.recombine_street(b[n],d,c,m),l.push({id:g,label:e,simple_label:e,street:c,number:b[n]});a.current_numbers_source=l;a.show_streets();a.street&&(a.street.autocomplete("option","minLength",0),a.street.autocomplete("search",a.street.val()))}},a.fill_nums=function(a,c){a=[];for(var b=1;b<=c;b++)a.push(b);return a},a.activate_single_autocomplete=function(){var b=a.fast_country();a.single&&(a.removeAutocomplete(a.single),a.single.autocomplete({height:150,
delay:b?0:300,create:function(){e(this).data("ui-autocomplete")._renderItem=a.render_item;e(e(this).data("ui-autocomplete").menu.activeMenu).addClass(e(this).attr("id")+"-autocomplete")},source:function(b,d){var c=a.selected_country();b=window.SitePreferences.DqeAddressServer+"SINGLEV2/?Pays\x3d"+c+"\x26Adresse\x3d"+encodeURIComponent(b.term)+"\x26Licence\x3d"+a.license;(a.lat||a.lon)&&(b+="\x26lat\x3d"+a.lat+"\x26lon\x3d"+a.lon);a.ajax(b,function(b){d(a.filter_single(b))})},minLength:b?1:2,select:function(b,
d){if(a.prov&&d.item.prov&&(a.prov.val(d.item.prov),a.execute_trigger("prov",[d.item.prov])),a.company)b=d.item.company?d.item.company:"",a.company.val(b),a.execute_trigger("company",[b]);var c;a.compl&&a.compl.val(d.item.compl);a.zip&&a.fill_zip(d.item.zip);a.city&&a.city.val(d.item.city);a.zipcity&&(a.zipcity.val(d.item.zip+" "+d.item.city),a.selected_zipcity_value=a.zipcity.val());a.local&&d.item.local&&(a.local.val(d.item.local),a.current_local=d.item.local,a.execute_trigger("local",[d.item.local]));
a.current_city_id=d.item.city_id;a.current_zip=d.item.zip;a.current_street_id=d.item.id;d.item.num&&(a.current_number=d.item.num);a.number?(a.number.val(d.item.num),c=a.recombine_street("",d.item.type,d.item.street),a.execute_trigger("number",[d.item.num])):c=a.recombine_street(d.item.num,d.item.type,d.item.street);a.street&&a.street.val(c);b=a.selected_country();return!d.item.nums&&a.force_nums&&a.force_nums[b]&&a.min_bound&&a.max_bound&&!a.has_number(c)&&(d.item.nums=a.fill_nums(a.min_bound,a.max_bound)),
d.item.nums?(a.number||a.settings.single!==a.settings.street||a.removeAutocomplete(a.single),a.show_numbers_directly(d.item.nums,d.item.street,d.item.type,d.item.id)):a.show_complements(),a.settings.single===a.settings.street&&a.street.on("input.dqeEvent",a.reset_single_autocomplete),a.execute_trigger("single",d.item),!1},focus:function(a,b){a.preventDefault()}}).off("click").on("click.dqeEvent",function(){var b=a.single.val();e(this).data("ui-autocomplete")&&2<b.length&&e(this).autocomplete("search",
b)}))},a.activate_zipcity_autocomplete(),a.activate_single_autocomplete(),a.show_complements=function(){if(a.compl){var b=a.current_street_id,c=a.current_number;a.removeAutocomplete(a.compl);a.compl.off("focus");a.compl.autocomplete({delay:150,source:function(d,g){a.single&&a.current_compl_source&&a.current_compl_source.length?g(a.current_compl_source):(d=a.url({fn:a.single?"COMPLV2":"COMPL",IDVoie:b,IDNum:c,Taille:38,Pays:a.selected_country()}),a.ajax(d,function(b){if(!a.single&&a.geoloc&&a.latlng(a.geoloc),
!b)return[];if(a.geoloc&&b.Latitude&&b.Longitude)window[a.geoloc]({status:1,Latitude:b.Latitude,Longitude:b.Longitude});for(var c=1,d=[];b[c];)d.push(b[c].Batiment),c++;g(d)}))},minLength:0,select:function(b,c){a.compl.val(c.item.value);a.execute_trigger("compl",[c.item.value])}}).focus(function(){e(this).data("ui-autocomplete")&&e(this).autocomplete("search",e(this).val())});a.compl.focus()}},a.parse=function(b,c){if(c)c=a.url({fn:"RNVP",Adresse:c,Instance:0,Taille:38,Pays:"FRA"}),a.ajax(c,function(a){a=
a[1];var c={},d;for(d in a)a.hasOwnProperty(d)&&"DQE"!==d.substr(0,3)&&"Instance"!==d&&(c[d]=a[d]);window[b](c)});else window[b]({})},a.check=function(b,c){var d,g,k,e,m,l;if(c)d=c.compl?c.compl:"",g=c.street?c.street:"",k=c.local?c.local:"",e=c.prov?c.prov:"",m=c.zip?c.zip:"",l=c.city?c.city:"",c=c.country?c.country:a.selected_country();else{(d=a.compl?a.compl.val():"",g=a.street?a.street.val():"",k=a.local?a.local.val():"",e=a.prov?a.prov.val():k,a.number)&&(c=a.number.val())&&(g=a.num_is_after()?
g+" "+c:c+" "+g);if(l=m="",a.zipcity)if(c=a.zipcity.val(),a.current_zip&&0===c.indexOf(a.current_zip)){var h=a.current_zip.length;m=a.current_zip;l=c.substr(h+1)}else h=c.indexOf(" "),-1<h&&(m=c.substr(0,h),l=c.substr(h+1));else m=a.zip.val(),l=a.city.val();c=a.selected_country()}e=a.url({fn:"RNVP",Adresse:d+"|"+g+"|"+e+"|"+m+"|"+l,Instance:0,Taille:38,Pays:c});a.ajax(e,function(c){c=c[1];var f=parseInt(c.DQECodeDetail,10);isNaN(f)&&(f=0);var e=parseInt(c.DQECodeErreur,10);isNaN(e)&&(e=0);var h=0===
f?c.DQELibErreur:{10:"Adresse correcte",20:"Adresse correcte (voie non reconnue, mais il s'agit d'un cedex ou d'une BP)",21:"Petite ville, numéro de facade hors bornes",22:"Petite ville, numéro de facade absent (le reste de l'adresse est correcte)",23:"Grande ville, numéro de facade hors bornes",24:"Grande ville, numéro de facade absent (le reste de l'adresse est correcte)",25:"Si CEDEXA activé, adresse CEDEX inconnue de CEDEXA",30:"Petite ville, voie non reconnue",31:"Petite ville, voie non reconnue (quartier reconnu ne permettant pas de déduire la voie)",
40:"Petite ville, voie absente (quartier reconnu ne permettant pas de déduire la voie)",41:"Petite ville, voie absente",50:"Grande ville, voie non reconnue",51:"Grande ville, voie non reconnue (quartier reconnu ne permettant pas de déduire la voie)",60:"Grande ville, voie absente (quartier reconnu ne permettant pas de déduire la voie)",61:"Grande ville, voie absente",70:"CP/Ville non corrigeable (voie présente)",80:"CP/Ville non corrigeable (voie absente)",90:"Adresse internationale détectée"}[f];
f||e||"KO"!==c.DQECodeErreur||(f=90,e=1);f={data:f,error:e,label:h,status_iris_ilot:c.Status_IrisIlot,iris:c.iris,ilot:c.ilot};c.ListeNumero&&(f.known_numbers=c.ListeNumero);h={};(h.compl=c.Complement?c.Complement:"",h.street=c.Adresse?c.Adresse:"",h.street_name=c.Voie?c.Voie:"",h.street_type=c.TypeVoie?c.TypeVoie:"",h.number=c.Numero?c.Numero:"",h.num_short=c.NumSeul?c.NumSeul:"",h.local=c.LieuDit?c.LieuDit:"",h.zip=c.CodePostal?c.CodePostal:"",h.city=c.Localite?c.Localite:"",f.normalized=h,e)||
(e={},d!==c.Complement&&(e.compl=c.Complement),g!==c.Adresse&&(e.street=c.Adresse,e.street_name=c.Voie,e.street_type=c.TypeVoie,e.number=c.NumSeul),k!==c.LieuDit&&(e.local=c.LieuDit),m!==c.CodePostal&&(e.zip=c.CodePostal),l!==c.Localite&&(e.city=c.Localite),0<a.count(e)&&(f.corrections=e));window[b](f)})},a.iptracker=function(b,c){var d={status:0,msg:"Adresse IP non identifiée"};if(b)b=a.url({fn:"CP",CodePostal:b,Pays:"FRA"}),a.ajax(b,function(a){a&&a[1]||window[c](d);0===(a=a[1]).Latitude&&0===a.Longitude&&
window[c](d);a.status=1;window[c](a)});else window[c](data)},a.url=function(b){var c=[],d;for(d in b)b.hasOwnProperty(d)&&"fn"!==d&&"server"!==d&&c.push(d+"\x3d"+encodeURIComponent(b[d]));return"https://prod2.dqe-software.com/"+b.fn+"/?"+c.join("\x26")+"\x26Licence\x3d"+a.license},a.zip&&!a.single&&a.zip.on("input.dqeEvent",function(){a.zip.is(":visible")&&a.zip_pattern.hasOwnProperty(a.selected_country())&&a.show_cities()}),a.city&&a.city_search&&!a.single&&a.city.on("input.dqeEvent",function(){a.city_search_enabled||
a.search_cities()}).on("blur.dqeEvent",function(){a.city_search_enabled&&(a.city_search_enabled=0,a.removeAutocomplete(a.city))}),a.override_events(),a}}(jQuery);
(function(e){e.fn.dqemail=function(h){var d=this,r=d.closest("div"),p=!1,a=!1,b=SitePreferences.DQETimeoutMobile?SitePreferences.DQETimeoutMobile:2E3,c=SitePreferences.DQETimeoutDesktop?SitePreferences.DQETimeoutDesktop:500;0!==h.bootstrap&&r.length?(p=r.find("span.glyphicon"),p.length?a="glyphicon":p=r.find("i.fa"),p.length?a="fa":p=!1):r=!1;h=e.extend({country:"FRA",suggest:!1,autocheck:!0,license:"",extendedsyntax:"n",checkuser:"y",rectify:0,bootstrap:1},h);return d.settings=h,d.server=h.server,
d.license=h.license,d.suggest=h.suggest,d.last_name=!!h.last_name&&e(h.last_name),d.first_name=!!h.first_name&&e(h.first_name),d.autocheck=!!h.autocheck&&h.autocheck,d.rectify=!!h.rectify,d.extended="y"===h.extendedsyntax?"y":"n",d.checkuser=h.checkuser&&"y"!==h.checkuser?"n":"y",d.timeout=[],d.countryField=3!==h.country.length&&e(h.country),d.country=h.country,d.asmx=-1<d.server.toLowerCase().indexOf(".asmx"),d.asmx&&(e.ajaxSetup({type:"POST",contentType:"application/json; charset\x3dutf-8",data:"{}",
processData:!1,dataFilter:function(a){return a="undefined"!=typeof JSON&&"function"==typeof JSON.parse?JSON.parse(a):eval("("+a+")"),a.hasOwnProperty("d")?a.d:a}}),e.ajaxPrefilter(function(a,b,c){a.data=JSON.stringify(b.data)})),"jsonp"===d.server?d.ajax=function(a,b){e.ajax({url:a,dataType:"jsonp",jsonp:"callback",success:function(a){b(JSON.parse(a))},error:function(a,c,f){a={code:99,msg:"Service non disponible",state:"error"};b(a);d.trigger("checked",[a]);d.bootstrapState(a.state)}})}:"cors"===
d.server?d.ajax=function(a,b){e.ajax({url:a,method:"GET",dataType:"text",crossdomain:!0,success:function(a){a=a?JSON.parse(a):{};d.trigger("checked",[a]);b(a)}})}:d.ajax=function(a,g){e.ajax({url:d.server,data:{url:a},method:"POST",data:{url:a},dataType:"json",beforeSend:function(a){var f=Util&&Util.isMobile()?b:c;a.requestCode=d.setUniqueID();d.timeout[a.requestCode]=setTimeout(function(){return g("timeout")},f)},success:function(a,b,c){g(a,c)},error:function(a,b,c){a={code:99,msg:"Service non disponible",
state:"error"};g(a);d.trigger("checked",[a]);d.bootstrapState(a.state)}})},d.render_item=function(a,b){var c,d=b.label,f=d.indexOf("@");-1<f?(c=d.substr(0,f),d=d.substr(f+1),c='\x3cspan class\x3d"highlighted"\x3e'+c+"@\x3c/span\x3e"+(-1<(f=d.lastIndexOf("."))?"\x3cspan\x3e"+d.substr(0,f)+"\x3c/span\x3e\x3cspan\x3e"+d.substr(f)+"\x3c/span\x3e":"\x3cspan\x3e"+d+"\x3c/span\x3e")):c="\x3cspan\x3e"+d+"\x3c/span\x3e";return e("\x3cli\x3e\x3c/li\x3e").data("item.autocomplete",b).append("\x3cdiv\x3e"+c+"\x3c/div\x3e").appendTo(a)},
d.remove_accents=function(a){for(var b,c,d=a.length,f="",e=0;e<d;e++)c=a.charAt(e),f+=-1===(b="ÀÁÂÃÄÈÉÊËÌÍÎÏÒÓÔÕÖÙÚÛÜÇçàáâãèéêëîïòôõöùúûüñ".indexOf(c))?c:"AAAAAEEEEIIIIOOOOOUUUUCcaaaaeeeeiioooouuuun".charAt(b);return f},d.check=function(a){var b=d.val();if(b){d.trigger("checking");d.bootstrapState("loading");var c=d.remove_accents(b),f=!1;c!==b&&(d.val(c),f=!0);c={fn:"DQEEMAILLOOKUP",Email:encodeURIComponent(c),extendedsyntax:d.extended,checkuser:d.checkuser};d.rectify&&(c.Rectify=1);var e,c=d.url(c);
void 0!==e&&e.abort();e=d.ajax(c,function(c,e){e&&clearTimeout(d.timeout[e.requestCode]);if("timeout"!=c){if(!c||!c[1])return{code:99,msg:"Le domaine ne répond pas",state:"error"};e=c[1].IdError;var g=b.split("@"),g={91:"Erreur de syntaxe",92:"Domaine "+g[1]+" inconnu",93:"Domaine "+g[1]+" en blacklist",94:"Nom d'utilisateur non autorisé (nom réservé ou interdit)",95:"Adresse e-mail temporaire jetable",99:"Le domaine ne répond pas","04":"E-mail non fourni","03":"Boîte de réception pleine","02":"Adresse e-mail non trouvée sur le domaine "+
g[1],"01":"E-mail correct mais le nom "+g[0]+" n'a pas pu être contrôlé","00":"E-mail valide"},k={91:"error",92:"optional",93:"error",94:"error",99:"error","04":"error","03":"error","02":"error","01":"warning","00":"success",95:"error"};k[e]||(e="01");g={code:e,msg:g[e],state:k[e]};"00"!==e&&"01"!==e||!f||(g.autocorrect=1,g.input=b);(c=c[1]).Redressement&&c.eMail!==c.eMailOrigine&&(g.suggestion=c.eMail,!d.rectify||"01"!==e&&"02"!==e&&"91"!==e&&"92"!==e||(g.rectified=!0));d.trigger(a||"checked",[g]);
d.bootstrapState(g.state)}else g={code:"01",msg:"Request exceeded time limit",state:"timeout"},d.trigger(a||"checked",[g])})}},d.isIE=function(){var a=navigator.userAgent;return-1<a.indexOf("MSIE ")||-1<a.indexOf("Trident/")||-1<a.indexOf("Edge/")},d.clearBootstrapState=function(){r&&r.removeClass("has-success").removeClass("has-warning").removeClass("has-error");p&&("glyphicon"==a?p.removeClass("glyphicon-ok").removeClass("glyphicon-warning-sign").removeClass("glyphicon-remove"):p.removeClass("fa-check").removeClass("fa-warning").removeClass("fa-remove").removeClass("fa-spin").removeClass("fa-cog"))},
d.bootstrapState=function(b){var c;d.clearBootstrapState();r&&b&&r.addClass("has-"+b);p&&("glyphicon"===a?(c={success:"ok",warning:"warning-sign",error:"remove"}[b],b&&p.addClass("glyphicon-"+c)):(c={success:"check",warning:"warning",error:"remove",loading:"cog"}[b],b&&p.addClass("fa-"+c),"loading"!=b||d.isIE()||p.addClass("fa-spin")))},d.setUniqueID=function(){return Math.random().toString(36).substr(2,5)},d.selected_country=function(){return d.countryField?d.countryField.val():d.country},d.removeAutocomplete=
function(a){a.data("ui-autocomplete")&&(a.autocomplete("destroy"),a.removeData("ui-autocomplete"))},d.suggest&&(d.removeAutocomplete(d),d.autocomplete({source:function(a,b){var c=d.last_name?d.remove_accents(d.last_name.val().toLowerCase()):"",f=d.first_name?d.remove_accents(d.first_name.val().toLowerCase()):"";a=d.remove_accents(a.term.toLowerCase());null!=a&&0<a.indexOf("@")&&(c=d.url({fn:"MAILSUGGEST",Nom:c,Prenom:f,Email:a,Instance:0,Pays:d.selected_country()}),d.ajax(c,function(a,c){if(c&&clearTimeout(d.timeout[c.requestCode]),
!a||!a.suggest)return[];a=a.suggest.slice(0,10);b(a)}));e(".ui-helper-hidden-accessible").remove()},minLength:0,delay:0,appendTo:e(d).parent(),create:function(){e(this).data("ui-autocomplete")._renderItem=d.render_item},select:function(a,b){return d.trigger("suggest",b.item),!0},focus:function(a,b){a.preventDefault()}}).focus(function(){e(this).data("ui-autocomplete")&&e(this).autocomplete("search",e(this).val())})),d.url=function(a){var b=[],c;for(c in a)a.hasOwnProperty(c)&&"fn"!==c&&"server"!==
c&&b.push(c+"\x3d"+encodeURIComponent(a[c]));return window.SitePreferences.DqeAddressServer+a.fn+"/?"+b.join("\x26")+"\x26Licence\x3d"+d.license},p&&d.on("keypress",function(){d.clearBootstrapState()}),d}})(jQuery);
(function(e){e.fn.dqephone=function(h){var d=this,r=SitePreferences.DQETimeoutMobile?SitePreferences.DQETimeoutMobile:2E3,p=SitePreferences.DQETimeoutDesktop?SitePreferences.DQETimeoutDesktop:500,a=d.closest("div"),b=!1,c=!1;a.length?(b=a.find("span.glyphicon"),b.length?c="glyphicon":b=a.find("i.fa"),b.length?c="fa":b=!1):a=!1;h=e.extend({country:"FRA",format:0,license:""},h);return d.settings=h,d.server=h.server,d.license=h.license,d.countryField=3!==h.country.length&&e(h.country),d.autocheck=void 0===
h.autocheck||h.autocheck,d.country=h.country,d.format=h.format,d.asmx=-1<d.server.toLowerCase().indexOf(".asmx"),d.asmx&&(e.ajaxSetup({type:"POST",contentType:"application/json; charset\x3dutf-8",data:"{}",processData:!1,dataFilter:function(a){return a="undefined"!=typeof JSON&&"function"==typeof JSON.parse?JSON.parse(a):eval("("+a+")"),a.hasOwnProperty("d")?a.d:a}}),e.ajaxPrefilter(function(a,b,c){a.data=JSON.stringify(b.data)})),"jsonp"===d.server?d.ajax=function(a,b){e.ajax({url:a,dataType:"jsonp",
jsonp:"callback",success:function(a){b(JSON.parse(a))}})}:"cors"===d.server?d.ajax=function(a,b){e.ajax({url:a,method:"GET",dataType:"text",crossdomain:!0,success:function(a){b(JSON.parse(a))}})}:d.ajax=function(a,b){d.ajaxRequest=e.ajax({url:d.server,data:{url:a},method:"POST",dataType:"json",beforeSend:function(){d.timeout=setTimeout(function(){d.ajaxRequest&&d.ajaxRequest.abort();"function"==typeof b&&b()},Util&&Util.isMobile()?r:p)},success:b})},d.check=function(a,b,c){var e=d.val();if(e&&!d.is(":hidden")){b=
b||d.format;var f=d.selected_country(),e=e.replace(/\s/g,"").trim();b={fn:"TEL",Pays:f,Tel:e,Format:b};d.trigger("checking",b);d.bootstrapState("loading");var g={status:0,state:"error",response:0,country:f,input:e,isValid:null};if(g,!e)return d.trigger("checked",[g]),d.bootstrapState("error"),void(a&&window[a](g));(c=1===parseInt(c))&&(b.complete_check=1);c=d.url(b);d.responseHandler=function(b){(clearTimeout(d.timeout),b&&b[1])?(b=b[1],parseInt(b.IdError,10),b={status:1,input:e,output:b.Tel,state:"success",
response:1,isValid:!!b.IdError,country:f}):b={status:0,state:"timeout",response:0,isValid:null,country:f,input:e};d.trigger("checked",[b]);d.bootstrapState(b.state);a&&window[a](b)};d.ajax(c,d.responseHandler)}},d.isIE=function(){var a=navigator.userAgent;return-1<a.indexOf("MSIE ")||-1<a.indexOf("Trident/")||-1<a.indexOf("Edge/")},d.clearBootstrapState=function(){a&&a.removeClass("has-success").removeClass("has-warning").removeClass("has-error");b&&("glyphicon"===c?b.removeClass("glyphicon-ok").removeClass("glyphicon-warning-sign").removeClass("glyphicon-remove"):
b.removeClass("fa-check").removeClass("fa-warning").removeClass("fa-remove").removeClass("fa-spin").removeClass("fa-cog"))},d.bootstrapState=function(e){var f;d.clearBootstrapState();e&&a.addClass("has-"+e);b&&("glyphicon"===c?(f={success:"ok",warning:"warning-sign",error:"remove"}[e],e&&b.addClass("glyphicon-"+f)):(f={success:"check",warning:"warning",error:"remove",loading:"cog"}[e],e&&b.addClass("fa-"+f),"loading"!==e||d.isIE()||b.addClass("fa-spin")))},d.selected_country=function(){return d.countryField?
d.countryField.find("option:selected").data("iso"):d.country},d.removeAutocomplete=function(a){a.data("ui-autocomplete")&&(a.autocomplete("destroy"),a.removeData("ui-autocomplete"))},d.url=function(a){var b=[],c;for(c in a)a.hasOwnProperty(c)&&"fn"!==c&&"server"!==c&&b.push(c+"\x3d"+encodeURIComponent(a[c]));return window.SitePreferences.DqeAddressServer+a.fn+"/?"+b.join("\x26")+"\x26Licence\x3d"+d.license},d.autocheck&&(d.check(),d.off("blur.dqe").on("blur.dqe",function(){d.check()})),b&&d.off("keypress.dqe").on("keypress.dqe",
function(){d.clearBootstrapState()}),d}})(jQuery);